<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 8: Test Data Management & Parameterization</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- highlight.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Shared Styles -->
    <link rel="stylesheet" href="../shared-styles.css">
</head>
<body>
    <!-- Header Section -->
    <div class="lesson-header">
        <div class="container">
            <div class="lesson-content">
                <div class="lesson-number-badge">8</div>
                <h1 class="lesson-title">Test Data Management & Parameterization</h1>
                <p class="lesson-description">Transform our testing framework from hardcoded data to flexible, data-driven testing with clean architecture and multiple data sources</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Navigation -->
        <div class="lesson-nav">
            <ul class="nav-breadcrumb">
                <li><a href="../index.html"><i class="bi bi-house"></i> Home</a></li>
                <li><i class="bi bi-chevron-right separator"></i></li>
                <li><span style="color: var(--secondary-color);">Step 8</span></li>
            </ul>
            <div class="nav-actions">
                <a href="step7.html" class="nav-btn nav-btn-outline"><i class="bi bi-arrow-left"></i> Step 7</a>
                <a href="https://github.com/radu-tataru/radu-tataru-qa-java-course-project-v2/tree/master/step8-test-data-management" class="nav-btn nav-btn-secondary" target="_blank"><i class="bi bi-github"></i> View Code</a>
                <a href="step9.html" class="nav-btn nav-btn-primary">Next: Step 9 <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>

        <!-- Learning Objectives -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-bullseye"></i></div>
                Learning Objectives
            </h2>
            <div class="objectives-list">
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Excel and CSV Data Providers</strong><br>
                        Implement comprehensive test data management with file providers
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Clean Architecture Restructure</strong><br>
                        Organize project with proper package structure
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Parameterized Testing</strong><br>
                        Master JUnit 5 and TestNG integration techniques
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Environment Configuration</strong><br>
                        Create multi-environment configuration management
                    </div>
                </div>
            </div>
                </div>

        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-info-circle"></i></div>
                What is Data-Driven Testing?
            </h2>
                    <p>Data-Driven Testing separates test logic from test data, allowing the same test method to run with multiple data sets. This approach provides several key advantages:</p>
                    
                    <div class="alert alert-info">
                        <strong>Benefits:</strong>
                        <ul>
                            <li>Single test covers multiple scenarios</li>
                            <li>Easy addition of new test cases without code changes</li>
                            <li>Non-technical users can contribute test data</li>
                            <li>Clear separation of test logic and test data</li>
                        </ul>
                    </div>

                    <div class="alert alert-warning">
                        <strong>Considerations:</strong>
                        <ul>
                            <li>Initial setup requires more planning</li>
                            <li>Data management overhead</li>
                            <li>Need for data validation mechanisms</li>
                        </ul>
                    </div>
                </div>

        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-diagram-3"></i></div>
                Clean Architecture Restructure
            </h2>
                    <p>Before implementing data-driven features, we'll reorganize our project into a clean, maintainable architecture:</p>

                    <h4>New Package Structure:</h4>
                    <pre><code class="language-text">com.example.app/
├── pages/              # Page Object Model classes
│   ├── BasePage.java
│   ├── GitHubHomePage.java
│   ├── JUnitHomePage.java
│   └── PageObjectManager.java
├── data/               # Test data management
│   ├── providers/      # Data provider classes
│   ├── models/         # Data model classes
│   └── readers/        # File reading utilities
├── config/             # Configuration management
│   ├── EnvironmentConfig.java
│   └── TestConfiguration.java
├── utils/              # Utility classes
│   ├── Logger.java
│   └── ScreenshotUtils.java
├── tests/              # Test execution classes
│   ├── TestResult.java
│   └── TestSummary.java
└── Main.java           # Application entry point</code></pre>
                </div>

        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-gear"></i></div>
                Step 8 Implementation
            </h2>
                    <p>We'll implement data-driven testing capabilities while maintaining clean architecture principles:</p>

                    <h3>Implementation Steps:</h3>
                    <ol>
                        <li><strong>Project Restructure & Excel Data Providers</strong> - Reorganize classes and implement Apache POI for Excel reading</li>
                        <li><strong>Parameterized Testing Integration</strong> - Use JUnit 5 @ParameterizedTest and TestNG @DataProvider</li>
                        <li><strong>Environment Configuration Management</strong> - Support dev, staging, and production environments</li>
                    </ol>
                </div>

        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-code-slash"></i></div>
                Key Code Examples
            </h2>

                    <h3>Excel Data Provider</h3>
                    <pre><code class="language-java">public class ExcelDataProvider {
    
    public List&lt;WebsiteTestData&gt; readWebsiteData(String filePath) {
        List&lt;WebsiteTestData&gt; testData = new ArrayList&lt;&gt;();
        
        try (FileInputStream fis = new FileInputStream(filePath);
             Workbook workbook = WorkbookFactory.create(fis)) {
            
            Sheet sheet = workbook.getSheetAt(0);
            
            for (Row row : sheet) {
                if (row.getRowNum() == 0) continue; // Skip header
                
                WebsiteTestData data = WebsiteTestData.builder()
                    .testName(getCellValue(row.getCell(0)))
                    .website(getCellValue(row.getCell(1)))
                    .expectedTitle(getCellValue(row.getCell(2)))
                    .environment(getCellValue(row.getCell(3)))
                    .build();
                    
                testData.add(data);
            }
        } catch (IOException e) {
            Logger.getInstance().log("Error reading Excel file: " + e.getMessage());
        }
        
        return testData;
    }
}</code></pre>

                    <h3>Parameterized Test Method</h3>
                    <pre><code class="language-java">public class ParameterizedWebsiteTests {
    
    @ParameterizedTest
    @MethodSource("testDataProvider")
    void testWebsiteWithExcelData(WebsiteTestData testData) {
        // Set environment configuration
        EnvironmentConfig.setEnvironment(testData.getEnvironment());
        
        // Execute test using Page Object Model
        PageObjectManager pageManager = new PageObjectManager(driver);
        BasePage page = pageManager.navigateToPage(testData.getWebsiteUrl());
        
        // Perform verification
        TestResult result = page.verifyPageElements();
        assertThat(result.allTestsPassed()).isTrue();
        
        Logger.getInstance().logPageTest(testData.getTestName(), 
                                        result.getOverallResult());
    }
    
    static Stream&lt;WebsiteTestData&gt; testDataProvider() {
        TestDataProvider provider = new TestDataProvider();
        return provider.getWebsiteTestData().stream();
    }
}</code></pre>

                    <h3>Environment Configuration</h3>
                    <pre><code class="language-java">public class EnvironmentConfig {
    private static String currentEnvironment = "dev";
    private static Properties envProperties;
    
    static {
        loadEnvironmentProperties();
    }
    
    public static void setEnvironment(String environment) {
        currentEnvironment = environment;
        loadEnvironmentProperties();
    }
    
    private static void loadEnvironmentProperties() {
        envProperties = new Properties();
        String propertiesFile = "environments/" + currentEnvironment + ".properties";
        
        try (InputStream is = EnvironmentConfig.class.getClassLoader()
                .getResourceAsStream(propertiesFile)) {
            envProperties.load(is);
        } catch (IOException e) {
            Logger.getInstance().log("Warning: Could not load environment properties");
        }
    }
    
    public static String getProperty(String key) {
        return envProperties.getProperty(key);
    }
}</code></pre>
                </div>

        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-tools"></i></div>
                Required Dependencies
            </h2>
                    <p>Add these Maven dependencies to your <code>pom.xml</code>:</p>
                    
                    <pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!-- Existing Selenium and testing dependencies --&gt;
    
    &lt;!-- NEW: Apache POI for Excel reading --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;
        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;
        &lt;version&gt;5.2.4&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;!-- NEW: TestNG for advanced parameterization --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.testng&lt;/groupId&gt;
        &lt;artifactId&gt;testng&lt;/artifactId&gt;
        &lt;version&gt;7.8.0&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;!-- NEW: Jackson for enhanced JSON processing --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
        &lt;version&gt;2.15.2&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;!-- NEW: AssertJ for fluent assertions --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.assertj&lt;/groupId&gt;
        &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;
        &lt;version&gt;3.24.2&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
                </div>

        <!-- Project Structure -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-folder"></i></div>
                Project Structure
            </h2>
            <div class="alert-box alert-info">
                <i class="bi bi-info-circle alert-icon"></i>
                <div>
                    <strong>Data-Driven Architecture:</strong> We'll restructure the project into clean packages with data providers, test models, and configuration management for enterprise-level testing.
                </div>
            </div>
            <div class="file-structure">
                <ul class="file-tree">
                    <li><span class="folder">📁 java_project/</span>
                        <ul>
                            <li><span class="folder">📁 src/</span>
                                <ul>
                                    <li><span class="folder">📁 main/java/com/example/app/</span>
                                        <ul>
                                            <li><span class="folder">📁 pages/</span>
                                                <ul>
                                                    <li><span class="java-file">📄 BasePage.java</span></li>
                                                    <li><span class="java-file">📄 GitHubHomePage.java</span></li>
                                                    <li><span class="java-file">📄 JUnitHomePage.java</span></li>
                                                    <li><span class="java-file">📄 PageObjectManager.java</span></li>
                                                </ul>
                                            </li>
                                            <li><span class="folder">📁 data/</span>
                                                <ul>
                                                    <li><span class="folder">📁 providers/</span>
                                                        <ul>
                                                            <li><span class="java-file">📊 ExcelDataProvider.java (NEW)</span></li>
                                                            <li><span class="java-file">📊 TestDataProvider.java (NEW)</span></li>
                                                        </ul>
                                                    </li>
                                                    <li><span class="folder">📁 models/</span>
                                                        <ul>
                                                            <li><span class="java-file">📋 WebsiteTestData.java (NEW)</span></li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li><span class="folder">📁 config/</span>
                                                <ul>
                                                    <li><span class="java-file">⚙️ EnvironmentConfig.java (NEW)</span></li>
                                                </ul>
                                            </li>
                                            <li><span class="folder">📁 utils/</span>
                                                <ul>
                                                    <li><span class="java-file">📋 Logger.java</span></li>
                                                </ul>
                                            </li>
                                            <li><span class="java-file">☕ Main.java</span></li>
                                        </ul>
                                    </li>
                                    <li><span class="folder">📁 test/java/com/example/app/</span>
                                        <ul>
                                            <li><span class="java-file">🧪 ParameterizedWebsiteTests.java (NEW)</span></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><span class="folder">📁 test-data/</span>
                                <ul>
                                    <li><span class="file">📊 website-test-data.xlsx (NEW)</span></li>
                                    <li><span class="file">📄 test-config.json (NEW)</span></li>
                                </ul>
                            </li>
                            <li><span class="folder">📁 environments/</span>
                                <ul>
                                    <li><span class="file">⚙️ dev.properties (NEW)</span></li>
                                    <li><span class="file">⚙️ staging.properties (NEW)</span></li>
                                    <li><span class="file">⚙️ prod.properties (NEW)</span></li>
                                </ul>
                            </li>
                            <li><span class="file">📄 pom.xml (Updated with POI, TestNG, Jackson)</span></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-table"></i></div>
                Test Data Structure
            </h2>
                    <p>Our Excel test data will follow this structure:</p>
                    
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Test Name</th>
                                    <th>Website</th>
                                    <th>Expected Title</th>
                                    <th>Button Text</th>
                                    <th>Environment</th>
                                    <th>Priority</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>GitHub_Production_Test</td>
                                    <td>GitHub</td>
                                    <td>GitHub</td>
                                    <td>Sign up</td>
                                    <td>prod</td>
                                    <td>high</td>
                                </tr>
                                <tr>
                                    <td>JUnit_Staging_Test</td>
                                    <td>JUnit</td>
                                    <td>JUnit 5</td>
                                    <td>Guide</td>
                                    <td>staging</td>
                                    <td>medium</td>
                                </tr>
                                <tr>
                                    <td>Maven_Dev_Test</td>
                                    <td>Maven</td>
                                    <td>Maven</td>
                                    <td>Download</td>
                                    <td>dev</td>
                                    <td>high</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="alert alert-success">
                    <h4><i class="bi bi-lightbulb"></i> Professional Testing Insight</h4>
                    <p><strong>Clean Architecture Benefits:</strong> Proper package organization makes the codebase more maintainable and scalable. Data-driven testing allows QA teams to add test scenarios without modifying code, while environment configuration enables the same tests to run across different environments. This approach is essential for enterprise-level test automation frameworks.</p>
                </div>

        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-trophy"></i></div>
                Key Takeaways
            </h2>
                    <div class="alert alert-success">
                        <strong>Key Benefits of Data-Driven Testing:</strong>
                        <ul>
                            <li><strong>Clean Architecture:</strong> Proper package organization improves maintainability</li>
                            <li><strong>Data-Driven Testing:</strong> Separate test logic from test data for flexibility</li>
                            <li><strong>Parameterized Tests:</strong> Single test method handles multiple scenarios</li>
                            <li><strong>Environment Management:</strong> Professional multi-environment support</li>
                        </ul>
                    </div>
                </div>

        <!-- Navigation Footer -->
        <div class="lesson-nav">
            <div class="nav-actions">
                <a href="step7.html" class="nav-btn nav-btn-outline"><i class="bi bi-arrow-left"></i> Step 7</a>
                <a href="step9.html" class="nav-btn nav-btn-primary">Next: Step 9 <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>