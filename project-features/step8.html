<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 8: Cucumber BDD Integration</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- highlight.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Shared Styles -->
    <link rel="stylesheet" href="../shared-styles.css">
</head>
<body>
    <!-- Header Section -->
    <div class="lesson-header">
        <div class="container">
            <div class="lesson-content">
                <div class="lesson-number-badge">8</div>
                <h1 class="lesson-title">Cucumber BDD Integration</h1>
                <p class="lesson-description">Transform technical Page Object tests into business-readable scenarios using Behavior-Driven Development with Cucumber and Gherkin syntax</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Navigation -->
        <div class="lesson-nav">
            <ul class="nav-breadcrumb">
                <li><a href="../index.html"><i class="bi bi-house"></i> Home</a></li>
                <li><i class="bi bi-chevron-right separator"></i></li>
                <li><span style="color: var(--secondary-color);">Step 8</span></li>
            </ul>
            <div class="nav-actions">
                <a href="step7.html" class="nav-btn nav-btn-outline"><i class="bi bi-arrow-left"></i> Step 7</a>
                <a href="https://github.com/radu-tataru/radu-tataru-qa-java-course-project-v2/tree/master/step8-cucumber-bdd" class="nav-btn nav-btn-secondary" target="_blank"><i class="bi bi-github"></i> View Code</a>
                <a href="step9.html" class="nav-btn nav-btn-primary">Next Step <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>

        <!-- Optional Challenge Notice -->
        <div class="content-section">
            <div class="alert-box alert-info">
                <i class="bi bi-trophy alert-icon"></i>
                <div>
                    <strong>Did you try the Page Object Challenge?</strong> If you haven't yet, consider going back to the <a href="page-object-challenge.html"><strong>Page Object Model Challenge</strong></a> to strengthen your POM design skills. Building your own page objects from scratch solidifies the patterns you'll use with Cucumber BDD!
                </div>
            </div>
        </div>

        <!-- Learning Objectives -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-bullseye"></i></div>
                Learning Objectives
            </h2>
            <div class="objectives-list">
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Gherkin Feature Files</strong><br>
                        Write business-readable scenarios using Given-When-Then syntax
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Cucumber Step Definitions</strong><br>
                        Bridge business language to technical Page Object implementations
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>BDD Test Execution</strong><br>
                        Run feature scenarios integrated with existing Page Object Model
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Business-Readable Testing</strong><br>
                        Create tests that stakeholders can understand and validate
                    </div>
                </div>
            </div>
        </div>

        <!-- Project Context -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-diagram-3"></i></div>
                Building on Page Object Model
            </h2>
            <div class="alert alert-info">
                <strong>Step 8 builds directly on Step 7's Page Object Model:</strong>
                <ul>
                    <li><strong>Existing Foundation:</strong> Reuse BasePage, GitHubHomePage, JUnitHomePage, etc.</li>
                    <li><strong>New Layer:</strong> Add Cucumber BDD on top of technical Page Objects</li>
                    <li><strong>Business Value:</strong> Transform technical tests into readable business scenarios</li>
                    <li><strong>Same Tests, Better Format:</strong> Run identical verifications with business-friendly language</li>
                </ul>
            </div>
        </div>

        <!-- Dependencies Section -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-box"></i></div>
                Maven Dependencies
            </h2>
            <p>Add Cucumber dependencies to your <code>pom.xml</code>:</p>

            <pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!-- Existing dependencies from Step 7 --&gt;

    &lt;!-- NEW: Cucumber Framework --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;
        &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;
        &lt;version&gt;7.14.0&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;
        &lt;artifactId&gt;cucumber-junit-platform-engine&lt;/artifactId&gt;
        &lt;version&gt;7.14.0&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;
        &lt;artifactId&gt;junit-platform-suite&lt;/artifactId&gt;
        &lt;version&gt;1.10.0&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
        </div>

        <!-- Gherkin Feature Files -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-file-earmark-text"></i></div>
                Gherkin Feature Files
            </h2>
            <p>Create business-readable test scenarios using Gherkin syntax. These scenarios will execute the same Page Object tests but in human-friendly language:</p>

            <h4 style="color: #1f2937 !important; margin-bottom: 15px; font-weight: 600;">Website Verification Feature</h4>
            <pre><code class="language-text">Feature: Website Verification Testing
  As a QA Engineer
  I want to verify developer website functionality
  So that users have reliable access to development resources

  Background:
    Given I have a web browser available
    And I can access the internet

  @smoke
  Scenario: Verify JUnit website accessibility
    Given I navigate to the "JUnit 5" website
    When the page loads completely
    Then the page title should contain "JUnit"
    And all critical page elements should be visible
    And I should be able to take a screenshot

  @smoke
  Scenario: Verify Maven website accessibility
    Given I navigate to the "Maven" website
    When the page loads completely
    Then the page title should contain "Maven"
    And all critical page elements should be visible
    And I should be able to take a screenshot

  @regression
  Scenario: Verify GitHub website accessibility
    Given I navigate to the "GitHub" website
    When the page loads completely
    Then the page title should contain "GitHub"
    And all critical page elements should be visible
    And I should be able to take a screenshot

  @comprehensive
  Scenario: Verify all developer websites
    Given I have the list of developer websites to test
    When I test each website for basic functionality
    Then all websites should be accessible
    And all page titles should match expectations
    And screenshots should be captured for evidence</code></pre>
        </div>

        <!-- Step Definitions -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-gear"></i></div>
                Cucumber Step Definitions
            </h2>
            <p>Step Definitions bridge Gherkin scenarios to your existing Page Object code:</p>

            <pre><code class="language-java">@Given("I have a web browser available")
public void i_have_a_web_browser_available() {
    assertNotNull(driver, "WebDriver should be initialized");
    Logger.getInstance().logInfo("Browser setup completed successfully");
}

@Given("I navigate to the {string} website")
public void i_navigate_to_website(String websiteName) {
    try {
        websites = dataReader.readLinkData("java_project/data/links.json");
        LinkData targetSite = websites.stream()
            .filter(site -> site.getName().equals(websiteName))
            .findFirst()
            .orElseThrow(() -> new RuntimeException("Website not found: " + websiteName));

        driver.get(targetSite.getUrl());
        Logger.getInstance().logLinkOpened(targetSite.getUrl());
    } catch (Exception e) {
        fail("Failed to navigate to " + websiteName + ": " + e.getMessage());
    }
}

@When("the page loads completely")
public void the_page_loads_completely() {
    try {
        Thread.sleep(2000); // Simple wait - in real projects use WebDriverWait
        assertTrue(driver.getTitle().length() > 0, "Page should have a title");
        Logger.getInstance().logInfo("Page loaded successfully");
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
        fail("Interrupted while waiting for page to load");
    }
}

@Then("the page title should contain {string}")
public void the_page_title_should_contain(String expectedTitle) {
    String actualTitle = driver.getTitle();
    boolean titleMatches = actualTitle.contains(expectedTitle);
    assertTrue(titleMatches,
        "Expected title to contain '" + expectedTitle + "' but was '" + actualTitle + "'");
    Logger.getInstance().logInfo("Title verification passed: " + actualTitle);
}

@And("all critical page elements should be visible")
public void all_critical_page_elements_should_be_visible() {
    String currentUrl = driver.getCurrentUrl();
    BasePage currentPage = pageManager.navigateToPage(currentUrl);

    TestResult result = currentPage.verifyPageElements();
    testSummary.addTestResult(result);

    assertTrue(result.allTestsPassed(),
        "Page elements verification failed: " + result.getFailureMessage());
    Logger.getInstance().logInfo("All page elements verified successfully");
}</code></pre>
        </div>

        <!-- Test Runner Configuration -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-play-circle"></i></div>
                JUnit 5 Cucumber Test Runner
            </h2>
            <p>Configure JUnit 5 to execute Cucumber features:</p>

            <pre><code class="language-java">@Suite
@IncludeEngines("cucumber")
@SelectClasspathResource("features")
@ConfigurationParameter(key = "cucumber.plugin", value = "pretty,html:target/cucumber-reports")
@ConfigurationParameter(key = "cucumber.glue", value = "com.example.app")
@ConfigurationParameter(key = "cucumber.features", value = "src/test/resources/features")
public class CucumberTestRunner {
    // This class serves as the entry point for running Cucumber tests
    // All configuration is done via annotations above
}</code></pre>
        </div>

        <!-- Project Structure -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-folder"></i></div>
                Project Structure
            </h2>
            <div class="alert-box alert-info">
                <i class="bi bi-info-circle alert-icon"></i>
                <div>
                    <strong>Cucumber BDD Integration:</strong> We'll add Cucumber framework to our existing Page Object Model, creating business-readable test scenarios.
                </div>
            </div>
            <div class="file-structure">
                <ul class="file-tree">
                    <li><span class="folder">ğŸ“ java_project/</span>
                        <ul>
                            <li><span class="folder">ğŸ“ src/</span>
                                <ul>
                                    <li><span class="folder">ğŸ“ main/java/com/example/app/</span>
                                        <ul>
                                            <li><span class="java-file">â˜• Main.java</span></li>
                                            <li><span class="java-file">ğŸ“„ BasePage.java</span></li>
                                            <li><span class="java-file">ğŸ“„ GitHubHomePage.java</span></li>
                                            <li><span class="java-file">ğŸ“„ JUnitHomePage.java</span></li>
                                            <li><span class="java-file">ğŸ“„ MavenHomePage.java</span></li>
                                            <li><span class="java-file">ğŸ“„ SeleniumHomePage.java</span></li>
                                            <li><span class="java-file">ğŸ“„ PageObjectManager.java</span></li>
                                            <li><span class="java-file">ğŸ“„ JsonLinkDataReader.java</span></li>
                                            <li><span class="java-file">ğŸ“„ LinkData.java</span></li>
                                            <li><span class="java-file">ğŸ“„ TestResult.java</span></li>
                                            <li><span class="java-file">ğŸ“„ TestSummary.java</span></li>
                                            <li><span class="java-file">ğŸ“„ Logger.java</span></li>
                                        </ul>
                                    </li>
                                    <li><span class="folder">ğŸ“ test/java/com/example/app/</span>
                                        <ul>
                                            <li><span class="java-file">ğŸ¥’ CucumberTestRunner.java (NEW)</span></li>
                                            <li><span class="java-file">ğŸ¥’ WebsiteVerificationSteps.java (NEW)</span></li>
                                        </ul>
                                    </li>
                                    <li><span class="folder">ğŸ“ test/resources/features/</span>
                                        <ul>
                                            <li><span class="feature-file">ğŸ¥’ website-verification.feature (NEW)</span></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><span class="folder">ğŸ“ data/</span>
                                <ul>
                                    <li><span class="json-file">ğŸ“„ links.json</span></li>
                                </ul>
                            </li>
                            <li><span class="folder">ğŸ“ lib/</span>
                                <ul>
                                    <li><span class="jar-file">ğŸ“¦ org.json.jar</span></li>
                                    <li><span class="jar-file">ğŸ“¦ selenium-java.jar</span></li>
                                    <li><span class="jar-file">ğŸ¥’ cucumber-java.jar (NEW)</span></li>
                                </ul>
                            </li>
                            <li><span class="xml-file">âš™ï¸ pom.xml (Updated with Cucumber)</span></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Running Tests -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-terminal"></i></div>
                Running BDD Tests
            </h2>
            <p>Execute your Cucumber scenarios with Maven:</p>

            <div class="terminal-output">
                <div class="terminal-header">
                    <div class="terminal-title">Maven Execution</div>
                </div>
                <pre><code># Run all Cucumber tests
mvn test

# Run specific scenarios by tag
mvn test -Dcucumber.filter.tags="@smoke"
mvn test -Dcucumber.filter.tags="@regression"

# Generate HTML reports
mvn test -Dcucumber.plugin="pretty,html:target/cucumber-reports"</code></pre>
            </div>

            <div class="alert alert-success">
                <strong>BDD Benefits:</strong>
                <ul>
                    <li><strong>Business Readable:</strong> Stakeholders can understand and validate test scenarios</li>
                    <li><strong>Living Documentation:</strong> Features serve as up-to-date documentation</li>
                    <li><strong>Collaboration:</strong> Bridge between business requirements and technical implementation</li>
                    <li><strong>Reusable Steps:</strong> Step definitions can be shared across multiple scenarios</li>
                </ul>
            </div>
        </div>

        <!-- Key Benefits -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-trophy"></i></div>
                Step 8 Achievements
            </h2>
            <div class="alert alert-success">
                <strong>What You've Accomplished:</strong>
                <ul>
                    <li><strong>BDD Integration:</strong> Added Cucumber layer over existing Page Objects</li>
                    <li><strong>Business Language:</strong> Transformed technical tests into readable scenarios</li>
                    <li><strong>Gherkin Mastery:</strong> Written Given-When-Then scenarios for website testing</li>
                    <li><strong>Step Definitions:</strong> Created bridge between business language and technical code</li>
                    <li><strong>Tagged Execution:</strong> Organized tests with @smoke, @regression tags</li>
                    <li><strong>Cucumber Reports:</strong> Generated HTML reports showing scenario results</li>
                </ul>
            </div>
        </div>

        <!-- Next Steps Preview -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-arrow-right-circle"></i></div>
                Coming Next: ExtentReports Integration
            </h2>
            <div class="alert alert-info">
                <strong>Step 9 will enhance our BDD framework with professional reporting:</strong>
                <ul>
                    <li><strong>ExtentReports:</strong> Beautiful HTML reports with charts and analytics</li>
                    <li><strong>Screenshot Integration:</strong> Visual evidence attached to each test step</li>
                    <li><strong>Enhanced Cucumber Steps:</strong> Rich reporting integrated with BDD scenarios</li>
                    <li><strong>Dashboard Analytics:</strong> Test trends, pass/fail rates, and execution statistics</li>
                </ul>
            </div>
        </div>

        <!-- Navigation Footer -->
        <div class="lesson-nav">
            <div class="nav-actions footer-nav">
                <a href="step7.html" class="nav-btn nav-btn-outline"><i class="bi bi-arrow-left"></i> Step 7: Page Objects</a>
                <a href="step9.html" class="nav-btn nav-btn-primary">Next: ExtentReports <i class="bi bi-arrow-right"></i></a>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
