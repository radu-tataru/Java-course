<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 10: Performance Testing & Advanced Frameworks</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- highlight.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Shared Styles -->
    <link rel="stylesheet" href="../shared-styles.css">
</head>

<body>
    <!-- Header Section -->
    <div class="lesson-header">
        <div class="container">
            <div class="lesson-content">
                <div class="lesson-number-badge">10</div>
                <h1 class="lesson-title">Performance Testing & Advanced Frameworks</h1>
                <p class="lesson-description">Master enterprise-level performance testing with JMeter integration, load testing automation, and advanced framework patterns including Cucumber BDD and REST API testing</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Navigation -->
        <div class="lesson-nav">
            <ul class="nav-breadcrumb">
                <li><a href="../index.html"><i class="bi bi-house"></i> Home</a></li>
                <li><i class="bi bi-chevron-right separator"></i></li>
                <li><span style="color: var(--secondary-color);">Step 10</span></li>
            </ul>
            <div class="nav-actions">
                <a href="step9.html" class="nav-btn nav-btn-outline"><i class="bi bi-arrow-left"></i> Step 9</a>
                <a href="https://github.com/radu-tataru/radu-tataru-qa-java-course-project-v2/tree/master/step10-performance-testing" class="nav-btn nav-btn-secondary" target="_blank"><i class="bi bi-github"></i> View Code</a>
                <a href="../index.html" class="nav-btn nav-btn-primary">Course Complete <i class="bi bi-check-circle"></i></a>
            </div>
        </div>

        <!-- Learning Objectives -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-bullseye"></i></div>
                Learning Objectives
            </h2>
            <div class="objectives-list">
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Performance Testing Integration</strong><br>
                        Implement JMeter load testing within our automated test suite
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Behavior-Driven Development</strong><br>
                        Add Cucumber BDD framework for stakeholder-readable test scenarios
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>REST API Testing</strong><br>
                        Create comprehensive API test automation with REST Assured
                    </div>
                </div>
                <div class="objective-item">
                    <i class="bi bi-check-circle objective-icon"></i>
                    <div>
                        <strong>Enterprise Framework Architecture</strong><br>
                        Build scalable test frameworks ready for Fortune 500 environments
                    </div>
                </div>
            </div>
        </div>

        <!-- What We're Building -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-lightbulb"></i></div>
                From Functional to Performance & API Testing
            </h2>
            <p>In this final lesson, we're completing our <strong>enterprise testing framework</strong> by adding performance testing, BDD scenarios, and API automation. This represents the complete skill set expected of senior QA engineers:</p>
            
            <div class="alert-box alert-info">
                <i class="bi bi-info-circle alert-icon"></i>
                <div>
                    <strong>Senior QA Reality:</strong> Top-tier companies expect QA engineers to handle UI testing, API testing, performance testing, and BDD collaboration. Mastering all these areas puts you in the top 10% of QA professionals worldwide.
                </div>
            </div>

            <h3>The Complete Testing Strategy</h3>
            <ul>
                <li><strong>Performance Testing:</strong> Validate application performance under realistic user loads</li>
                <li><strong>BDD Scenarios:</strong> Business-readable test scenarios that bridge technical and non-technical teams</li>
                <li><strong>API Automation:</strong> Comprehensive REST API testing with authentication and validation</li>
            </ul>
        </div>

        <!-- JMeter Integration -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-speedometer2"></i></div>
                JMeter Performance Testing Integration
            </h2>
            <p>We'll integrate Apache JMeter into our test suite for automated performance validation:</p>

            <h3>Performance Test Manager</h3>
            <pre><code class="language-java">public class PerformanceTestManager {
    private static final Logger logger = LoggerFactory.getLogger(PerformanceTestManager.class);
    
    public PerformanceTestResult executeLoadTest(String testPlan, int userCount, int rampUp) {
        try {
            // Configure JMeter Engine
            StandardJMeterEngine jmeter = new StandardJMeterEngine();
            
            // Load test plan
            File testPlanFile = new File("src/test/resources/jmeter/" + testPlan + ".jmx");
            HashTree testPlanTree = SaveService.loadTree(testPlanFile);
            
            // Set user parameters
            setJMeterProperty("users", String.valueOf(userCount));
            setJMeterProperty("rampup", String.valueOf(rampUp));
            
            // Execute test
            jmeter.configure(testPlanTree);
            jmeter.run();
            
            // Parse results
            return parsePerformanceResults();
            
        } catch (Exception e) {
            logger.error("Performance test execution failed: {}", e.getMessage());
            throw new RuntimeException("Load test failed", e);
        }
    }
    
    private PerformanceTestResult parsePerformanceResults() {
        // Parse JTL results file
        File resultsFile = new File("target/jmeter-results/results.jtl");
        
        return PerformanceTestResult.builder()
            .averageResponseTime(calculateAverageResponseTime(resultsFile))
            .maxResponseTime(calculateMaxResponseTime(resultsFile))
            .errorRate(calculateErrorRate(resultsFile))
            .throughput(calculateThroughput(resultsFile))
            .build();
    }
    
    @Test
    @Performance(users = 50, rampUp = 30, duration = 300)
    void performanceTestWebsiteEndpoints() {
        PerformanceTestResult result = executeLoadTest("website-load-test", 50, 30);
        
        // Assert performance criteria
        assertThat(result.getAverageResponseTime()).isLessThan(2000); // 2 seconds
        assertThat(result.getErrorRate()).isLessThan(0.01); // Less than 1%
        assertThat(result.getThroughput()).isGreaterThan(10); // 10 requests/sec
        
        AllureReportManager.attachPerformanceReport(result);
    }
}</code></pre>
        </div>

        <!-- Project Structure -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-folder"></i></div>
                Project Structure
            </h2>
            <div class="alert-box alert-info">
                <i class="bi bi-info-circle alert-icon"></i>
                <div>
                    <strong>Enterprise Framework:</strong> Final architecture includes performance testing, BDD scenarios, API testing, and advanced reporting for complete test coverage.
                </div>
            </div>
            <div class="file-structure">
                <ul class="file-tree">
                    <li><span class="folder">üìÅ java_project/</span>
                        <ul>
                            <li><span class="folder">üìÅ src/</span>
                                <ul>
                                    <li><span class="folder">üìÅ main/java/com/example/app/</span>
                                        <ul>
                                            <li><span class="folder">üìÅ performance/</span>
                                                <ul>
                                                    <li><span class="java-file">‚ö° PerformanceTestManager.java (NEW)</span></li>
                                                    <li><span class="java-file">‚ö° LoadTestRunner.java (NEW)</span></li>
                                                </ul>
                                            </li>
                                            <li><span class="folder">üìÅ api/</span>
                                                <ul>
                                                    <li><span class="java-file">üîå APITestClient.java (NEW)</span></li>
                                                    <li><span class="java-file">üîå APIValidationUtils.java (NEW)</span></li>
                                                </ul>
                                            </li>
                                            <li><span class="folder">üìÅ bdd/</span>
                                                <ul>
                                                    <li><span class="java-file">ü•í StepDefinitions.java (NEW)</span></li>
                                                    <li><span class="java-file">ü•í CucumberHooks.java (NEW)</span></li>
                                                </ul>
                                            </li>
                                            <li><span class="folder">üìÅ pages/ (existing)</span></li>
                                            <li><span class="folder">üìÅ data/ (existing)</span></li>
                                            <li><span class="folder">üìÅ config/ (existing)</span></li>
                                            <li><span class="folder">üìÅ reporting/ (existing)</span></li>
                                            <li><span class="folder">üìÅ notifications/ (existing)</span></li>
                                            <li><span class="java-file">‚òï Main.java</span></li>
                                        </ul>
                                    </li>
                                    <li><span class="folder">üìÅ test/java/com/example/app/</span>
                                        <ul>
                                            <li><span class="java-file">‚ö° PerformanceTestSuite.java (NEW)</span></li>
                                            <li><span class="java-file">üîå APITestSuite.java (NEW)</span></li>
                                            <li><span class="java-file">üß™ CITestSuite.java</span></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><span class="folder">üìÅ src/test/resources/</span>
                                <ul>
                                    <li><span class="folder">üìÅ features/</span>
                                        <ul>
                                            <li><span class="file">ü•í website-verification.feature (NEW)</span></li>
                                            <li><span class="file">ü•í api-endpoints.feature (NEW)</span></li>
                                        </ul>
                                    </li>
                                    <li><span class="folder">üìÅ jmeter/</span>
                                        <ul>
                                            <li><span class="file">‚ö° website-load-test.jmx (NEW)</span></li>
                                            <li><span class="file">‚ö° api-stress-test.jmx (NEW)</span></li>
                                        </ul>
                                    </li>
                                    <li><span class="folder">üìÅ api-contracts/</span>
                                        <ul>
                                            <li><span class="file">üîå github-api.json (NEW)</span></li>
                                            <li><span class="file">üîå test-endpoints.yaml (NEW)</span></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><span class="file">üìÑ pom.xml (Updated with JMeter, Cucumber, REST Assured)</span></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Cucumber BDD Framework -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-file-text"></i></div>
                Cucumber BDD Integration
            </h2>
            <p>Behavior-Driven Development makes tests readable for business stakeholders:</p>

            <h3>Feature File: <code>website-verification.feature</code></h3>
            <pre><code class="language-text">Feature: Website Verification
  As a quality assurance engineer
  I want to verify that all configured websites are accessible and functional
  So that I can ensure a reliable user experience

  Background:
    Given I have access to the test environment
    And all required browser drivers are available

  @smoke @critical
  Scenario Outline: Verify website accessibility and basic functionality
    Given I navigate to the "&lt;website&gt;" website
    When the page loads completely
    Then the page title should contain "&lt;expected_title&gt;"
    And all critical page elements should be visible
    And the page should load within 3 seconds

    Examples:
      | website | expected_title |
      | GitHub  | GitHub         |
      | JUnit   | JUnit 5        |
      | Maven   | Maven          |

  @api @integration
  Scenario: Verify API endpoints are responding correctly
    Given I have valid API credentials
    When I call the health check endpoint
    Then the response status should be 200
    And the response time should be less than 500ms
    And the response should contain valid JSON

  @performance @load-testing
  Scenario: Website performance under load
    Given I configure a load test for 50 concurrent users
    When I run the load test for 5 minutes
    Then the average response time should be less than 2 seconds
    And the error rate should be less than 1%
    And the system should maintain 95th percentile response time under 3 seconds</code></pre>

            <h3>Step Definitions Implementation</h3>
            <pre><code class="language-java">public class WebsiteVerificationSteps {
    
    private WebDriver driver;
    private PageObjectManager pageManager;
    private APITestClient apiClient;
    private PerformanceTestManager performanceManager;
    
    @Given("I navigate to the {string} website")
    public void i_navigate_to_website(String websiteName) {
        WebsiteTestData testData = TestDataProvider.getWebsiteByName(websiteName);
        driver.get(testData.getWebsiteUrl());
        AllureReportManager.captureScreenshot(driver);
    }
    
    @When("the page loads completely")
    public void the_page_loads_completely() {
        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));
        wait.until(webDriver -> ((JavascriptExecutor) webDriver)
            .executeScript("return document.readyState").equals("complete"));
    }
    
    @Then("the page title should contain {string}")
    public void the_page_title_should_contain(String expectedTitle) {
        String actualTitle = driver.getTitle();
        Allure.step("Verify page title contains: " + expectedTitle, () -> {
            assertThat(actualTitle).containsIgnoringCase(expectedTitle);
        });
    }
    
    @Then("all critical page elements should be visible")
    public void all_critical_page_elements_should_be_visible() {
        pageManager = new PageObjectManager(driver);
        BasePage currentPage = pageManager.getCurrentPage();
        
        TestResult result = currentPage.verifyPageElements();
        AllureReportManager.captureScreenshot(driver);
        
        assertThat(result.allTestsPassed())
            .withFailMessage("Critical elements verification failed: " + result.getFailureMessage())
            .isTrue();
    }
    
    @Given("I configure a load test for {int} concurrent users")
    public void i_configure_load_test(int userCount) {
        performanceManager.configureLoadTest("website-load-test", userCount, 60);
    }
    
    @When("I run the load test for {int} minutes")
    public void i_run_load_test_for_minutes(int duration) {
        performanceTestResult = performanceManager.executeLoadTest(duration * 60);
    }
    
    @Then("the average response time should be less than {int} seconds")
    public void verify_average_response_time(int maxSeconds) {
        assertThat(performanceTestResult.getAverageResponseTime())
            .isLessThan(maxSeconds * 1000);
    }
}</code></pre>
        </div>

        <!-- REST API Testing -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-plug"></i></div>
                REST API Testing with REST Assured
            </h2>
            <p>Complete API testing automation for modern web applications:</p>

            <h3>API Test Client</h3>
            <pre><code class="language-java">public class APITestClient {
    private static final String BASE_URI = EnvironmentConfig.getProperty("api.base.url");
    private RequestSpecification requestSpec;
    
    @PostConstruct
    public void setupClient() {
        requestSpec = new RequestSpecBuilder()
            .setBaseUri(BASE_URI)
            .setContentType(ContentType.JSON)
            .addFilter(new AllureRestAssured())
            .build();
    }
    
    public Response getHealthCheck() {
        return given(requestSpec)
            .when()
            .get("/health")
            .then()
            .statusCode(200)
            .time(lessThan(500L), MILLISECONDS)
            .extract().response();
    }
    
    public Response getUserProfile(String userId) {
        return given(requestSpec)
            .pathParam("userId", userId)
            .header("Authorization", "Bearer " + getAuthToken())
            .when()
            .get("/users/{userId}")
            .then()
            .statusCode(200)
            .body("id", equalTo(userId))
            .body("email", matchesPattern("^[\\w.-]+@[\\w.-]+\\.[a-zA-Z]{2,}$"))
            .extract().response();
    }
    
    public Response createTestUser(UserTestData userData) {
        return given(requestSpec)
            .header("Authorization", "Bearer " + getAdminToken())
            .body(userData)
            .when()
            .post("/users")
            .then()
            .statusCode(201)
            .body("email", equalTo(userData.getEmail()))
            .body("id", notNullValue())
            .extract().response();
    }
    
    @Test
    @Epic("API Testing")
    @Feature("User Management API")
    void testUserAPIWorkflow() {
        // Create user
        UserTestData newUser = UserTestData.builder()
            .email("test.user@example.com")
            .name("Test User")
            .build();
            
        Response createResponse = createTestUser(newUser);
        String userId = createResponse.jsonPath().getString("id");
        
        // Retrieve user
        Response getResponse = getUserProfile(userId);
        assertThat(getResponse.jsonPath().getString("name"))
            .isEqualTo(newUser.getName());
        
        // Verify in UI
        navigateToUserProfile(userId);
        assertThat(driver.findElement(By.id("user-name")).getText())
            .isEqualTo(newUser.getName());
    }
}</code></pre>
        </div>

        <!-- Required Dependencies -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-tools"></i></div>
                Required Dependencies
            </h2>
            <p>Final dependencies for the complete enterprise testing framework:</p>
            
            <pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!-- Existing dependencies from previous steps --&gt;
    
    &lt;!-- NEW: JMeter Performance Testing --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.jmeter&lt;/groupId&gt;
        &lt;artifactId&gt;ApacheJMeter_core&lt;/artifactId&gt;
        &lt;version&gt;5.6.2&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.jmeter&lt;/groupId&gt;
        &lt;artifactId&gt;ApacheJMeter_java&lt;/artifactId&gt;
        &lt;version&gt;5.6.2&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;!-- NEW: Cucumber BDD Framework --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;
        &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;
        &lt;version&gt;7.14.0&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;dependency&gt;
        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;
        &lt;artifactId&gt;cucumber-junit-platform-engine&lt;/artifactId&gt;
        &lt;version&gt;7.14.0&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;!-- NEW: REST Assured API Testing --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;
        &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;
        &lt;version&gt;5.4.0&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;dependency&gt;
        &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;
        &lt;artifactId&gt;allure-rest-assured&lt;/artifactId&gt;
        &lt;version&gt;2.24.0&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;!-- NEW: Advanced JSON Processing --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;
        &lt;artifactId&gt;json-path&lt;/artifactId&gt;
        &lt;version&gt;2.8.0&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
        </div>

        <!-- Enterprise Framework Architecture -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-diagram-3"></i></div>
                Enterprise Framework Architecture
            </h2>
            <p>Our final framework architecture represents industry best practices:</p>
            
            <h3>Framework Architecture Layers:</h3>
            <ul>
                <li><strong>Presentation Layer:</strong> Page Object Model, Cucumber BDD scenarios, reporting</li>
                <li><strong>Business Logic Layer:</strong> Test data management, environment configuration, utilities</li>
                <li><strong>Data Access Layer:</strong> Excel/CSV data providers, API clients, database connections</li>
                <li><strong>Infrastructure Layer:</strong> CI/CD pipelines, Docker containers, cloud execution</li>
            </ul>
        </div>

        <div class="alert alert-success">
            <h4><i class="bi bi-trophy"></i> Congratulations - You're Now Enterprise-Ready!</h4>
            <p><strong>Career Achievement Unlocked:</strong> You've built a complete enterprise testing framework that includes UI automation, API testing, performance testing, BDD collaboration, CI/CD integration, and advanced reporting. These are exactly the skills that senior QA engineers and test automation architects use at Fortune 500 companies. You're now qualified for positions with titles like "Senior QA Engineer," "Test Automation Architect," and "Quality Engineering Lead."</p>
        </div>

        <!-- Key Takeaways -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-trophy"></i></div>
                Key Takeaways
            </h2>
            <div class="alert alert-success">
                <strong>Key Benefits of Enterprise Testing Framework:</strong>
                <ul>
                    <li><strong>Performance Testing:</strong> JMeter integration validates performance under realistic loads</li>
                    <li><strong>BDD Framework:</strong> Cucumber scenarios bridge technical and business teams</li>
                    <li><strong>API Testing:</strong> REST Assured provides comprehensive API automation</li>
                    <li><strong>Enterprise Architecture:</strong> Scalable framework ready for professional environments</li>
                </ul>
            </div>
        </div>

        <!-- Course Completion -->
        <div class="content-section">
            <h2 class="section-title">
                <div class="section-icon"><i class="bi bi-award"></i></div>
                Course Completion & Next Steps
            </h2>
            <p>Congratulations on completing all 10 steps of the Java Course for QA Engineers! Here's what you've accomplished:</p>
            
            <div class="alert alert-success">
                <strong>Course Completion Checklist:</strong>
                <ul>
                    <li>‚úÖ <strong>File I/O Operations</strong> - Basic to advanced file processing</li>
                    <li>‚úÖ <strong>Desktop API Integration</strong> - System-level application interaction</li>
                    <li>‚úÖ <strong>OOP Architecture</strong> - Professional code design patterns</li>
                    <li>‚úÖ <strong>Production Patterns</strong> - Singleton, Factory, and logging systems</li>
                    <li>‚úÖ <strong>Test Automation</strong> - JUnit 5, Maven, and automated testing</li>
                    <li>‚úÖ <strong>Selenium WebDriver</strong> - Web application automation</li>
                    <li>‚úÖ <strong>Page Object Model</strong> - Maintainable test architecture</li>
                    <li>‚úÖ <strong>Data-Driven Testing</strong> - Excel/CSV data management and parameterization</li>
                    <li>‚úÖ <strong>CI/CD Pipelines</strong> - GitHub Actions and automated reporting</li>
                    <li>‚úÖ <strong>Performance & API Testing</strong> - JMeter, Cucumber BDD, REST Assured</li>
                </ul>
            </div>

            <div class="alert alert-primary">
                <h4><i class="bi bi-rocket"></i> Ready for Your Next Career Move?</h4>
                <p>With these skills, you're qualified for senior QA engineering positions. Consider pursuing additional certifications in cloud platforms (AWS, Azure) or exploring specialized areas like mobile testing, security testing, or test management tools.</p>
            </div>
        </div>

        <!-- Navigation Footer -->
        <div class="lesson-nav">
            <div class="nav-actions">
                <a href="step9.html" class="nav-btn nav-btn-outline"><i class="bi bi-arrow-left"></i> Step 9</a>
                <a href="../index.html" class="nav-btn nav-btn-primary">Course Complete <i class="bi bi-check-circle"></i></a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>